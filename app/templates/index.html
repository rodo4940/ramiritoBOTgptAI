<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RamiritoBOT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Animaci贸n para hacer zoom y cambiar color del t铆tulo */
        @keyframes zoomOut {
            0% {
                transform: scale(10);
                opacity: 0;
                color: rebeccapurple;
            }
            50% {
                opacity: 1;
                color: plum;
            }
            70% {
                transform: scale(1);
                opacity: 1;
                color: gold;
            }
            100% {
                transform: scale(1);
                opacity: 1;
                color: beige;
                font-weight: 500;
            }
        }

        /* Animaci贸n para mover y rotar el emoji */
        @keyframes moveDownRotate {
            0% {
                transform: translateY(-1000px) rotate(-720deg); /* Comienza desde arriba y rotando */
                opacity: 0;
            }
            50% {
                transform: translateY(250px) rotate(180deg); /* En el medio, ya en su posici贸n pero rotando */
                opacity: 1;
            }
            100% {
                transform: translateY(0) rotate(360deg); /* Llega a su lugar final, con rotaci贸n completa */
                opacity: 1;
            }
        }

        /* Animaci贸n para mover el texto y emoji hacia arriba y reducir su tama帽o */
        @keyframes moveUpResize {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 1;
                transform: translateY(-150px) scale(0.5);
            }
        }

        /* Animaci贸n para mostrar el formulario */
        @keyframes showForm {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        /* Estilos para las part铆culas (emoji) */
        .particle {
            position: absolute;
            font-size: 2rem; /* Tama帽o del emoji */
            animation: particleAnimation 2s ease-out forwards;
        }

        @keyframes particleAnimation {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: translate(var(--x), var(--y));
                opacity: 0;
            }
        }

        /* Animaci贸n para el bot贸n desaparecer */
        @keyframes hideButton {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        /* Aplicando animaciones con Tailwind */
        .animate-zoomOut {
            animation: zoomOut 2s ease-out forwards;
        }

        .animate-moveDownRotate {
            animation: moveDownRotate 2s ease-out forwards;
        }

        .animate-delay-2000 {
            animation-delay: 2s;
        }

        h1.animate-moveUpResize {
            animation: moveUpResize 1s ease forwards;
            color: darkseagreen;
        }

        .animate-showForm {
            animation: showForm 1s ease forwards;
        }

        .animate-hideButton {
            animation: hideButton 1s ease forwards;
        }
    </style>
</head>
<body class="bg-gray-900 h-screen flex justify-center items-center overflow-hidden">
    {% set sizeClass = "text-9xl" %}
    {% include 'components/title.html' %}
    <!-- <h1 class="text-white text-9xl flex items-center gap-5 transform scale-100 opacity-0 animate-zoomOut">
        RamiritoBOT
        <span class="emoji opacity-0 animate-moveDownRotate animate-delay-2000"></span>
    </h1> -->
    <button id="showFormBtn" class="absolute bottom-28 text-white bg-blue-500 hover:bg-blue-700 px-6 py-2 rounded-lg shadow-lg text-2xl">
        Comencemos
    </button>

    <!-- Formulario -->
    <div id="formContainer" class="hidden animate-showForm absolute flex justify-center items-center w-full h-full">
        <div class="clas bg-white p-6 rounded-lg shadow-lg w-1/2">
            <h1 class="text-2xl mb-4">Documento a consultar</h1>
            <form action="/upload" method="post" enctype="multipart/form-data">
                <input type="file" name="pdf_file" accept=".pdf" required class="mb-4 p-2 border border-gray-300 rounded">
                <button type="submit" class="text-white bg-green-500 hover:bg-green-700 px-7 py-3 rounded-lg">Procesar Documento</button>
            </form>
            {% if upload_error %}
                <p class="error text-red-500 mt-4">{{ upload_error }}</p>
            {% endif %}
            {% if upload_success %}
                <p class="success text-green-500 mt-4">Document uploaded successfully!</p>
            {% endif %}
        </div>
    </div>

    <script>
        const showFormBtn = document.getElementById("showFormBtn");
        const formContainer = document.getElementById("formContainer");
        const h1 = document.querySelector("h1");
        const emoji = document.querySelector(".emoji");

        showFormBtn.addEventListener("click", (event) => {
            // Ocultar el bot贸n con animaci贸n
            showFormBtn.classList.add("animate-hideButton");
            
            // Animaci贸n para mover el t铆tulo y emoji juntos y reducir su tama帽o
            h1.classList.add("animate-moveUpResize");
            
            // Animaci贸n para mover el emoji desde arriba y rotar
            emoji.classList.add("animate-moveDownRotate");

            // Mostrar el formulario con animaci贸n
            formContainer.classList.remove("hidden");
            formContainer.classList.add("animate-showForm");

            // Efecto de part铆culas (emoji) expandido con colores aleatorios
            generateParticles(event);
        });

        function generateParticles(event) {
            const numParticles = 200; // Aumentar el n煤mero de part铆culas para mayor cobertura
            const spreadRange = 1500; // Aumentar el rango de dispersi贸n para cubrir m谩s espacio
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('span');
                particle.classList.add('particle');
                particle.textContent = "";  // Emoji de part铆cula

                // Asignaci贸n de un color aleatorio para cada part铆cula
                const randomColor = getRandomColor();
                particle.style.color = randomColor; // Cambia el color del emoji

                // Posici贸n aleatoria en un rango m谩s amplio
                const x = Math.random() * spreadRange - spreadRange / 2;
                const y = Math.random() * spreadRange - spreadRange / 2;

                particle.style.setProperty('--x', `${x}px`);
                particle.style.setProperty('--y', `${y}px`);

                // Coloca la part铆cula en la posici贸n del bot贸n
                particle.style.left = `${event.clientX - 10}px`;
                particle.style.top = `${event.clientY - 10}px`;

                document.body.appendChild(particle);

                // Elimina la part铆cula despu茅s de la animaci贸n
                setTimeout(() => {
                    particle.remove();
                }, 2000); // Cambiar la duraci贸n para hacer que desaparezca m谩s lentamente
            }
        }

        // Funci贸n para generar colores aleatorios
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
    </script>
</body>
</html>
